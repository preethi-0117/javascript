<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit page</title>
    <script src="resumebuilder.js" type="text/javaScript"></script>
    <style>

        body{
           background-color:palevioletred;
        }

        /* label{

          font-size:medium;
        }

        input{
            background-color: black;
            color:white;
         
        } */

    </style>
</head>
<body>
    <h1>Edit page</h1>

    <label>Title</label>
    <input type="text" id="input"/><br><br>

    <label>Name</label>
    <input type="text" id="changename"/><br><br>

    <label>Email</label>
    <input type="text" id="editemail"/><br<br><br>
    <br>

    <label>Address</label>
    <input type="text" id="editaddress"/><br><br>

    <label>Phone</label>
    <input type="text" id="editphone"/><br><br>

    <label>Objectives</label>
     <input type="text" id="editobjectives"/><br><br>

    <label>Skills</label>
    <div id="edit_skill">
      
    </div>
    <button type="button" onclick="si('edit_skill')">Add skill</button><br><br>

   
    <label>Education</label>
    <table border="1">
     <thead>
        <th>Course Name</th>
        <th>Ins Name</th>
        <th>Percentage</th>
        <th>Year</th>
     </thead>
     <tbody id="edit_educat">

     </tbody>
    </table>
    <button type="button" onclick="createNewEducation()">Add education</button>

   

    <label>Projects</label>
    <table border="1">
        <thead>
            <th>Project_name</th>
            <th>duration</th>
            <th>Team size</th>
            <th>Organization</th>
        </thead>
        <tbody id="edit_project">

        </tbody>
    </table>

    <button type="butoon" onclick="createNewProject()">Add New Project</button>

    <label>Experience</label>
    <table border="1">
        <thead>
            <th>company_name</th>
            <th>year_of_experience</th>
        </thead>
        <tbody id="edit_experience">

        </tbody>
    </table>
    
    <button type="button" onclick="createNewExperience()">Add New Experience</button>

    <label>Certificates</label>
    <table border="1">
        <thead>
            <th>course_name</th>
            <th>year</th>
        </thead>
        <tbody id="edit_certify">

        </tbody>
    </table>

    <button type="button" onclick="createNewCertificates()">Add New Certificates</button>

    <h4>Personal_details</h4>
    <label>Father name</label>
    <input type="text" id="father_name_"/>

    <label>Mother name</label>
    <input type="text" id="mother_name_"/>

    <label>Dob</label>
    <input type="text" id="age"/>

  
    
    <label>Gender</label>
    <input type="text" id="gender"/>
    


    <label>Languages_known</label>
    <div id="edit_language">

    </div>
    <button type="button" onclick="side_add('edit_language')">Add language</button><br>

    <label>Hobbies</label>
    <div id="edit_hobby">

    </div>

    <button type="button"  onclick="side_add('edit_hobby')">Add hobby</button><br>

 
    <label>Declaration</label>
    
    
<input type="text" id="declare"/>
    <button type="button" onclick="updateData()">Update</button>
</body>

<script>
  
    
    let params = new URLSearchParams(document.location.search);
    let index = params.get("index");

    let data=localStorage.getItem("detail")
    let converted=JSON.parse(data);

    //single values show in input box

    document.getElementById("input").value=converted[index].title
    document.getElementById("changename").value=converted[index].name
    document.getElementById("editemail").value=converted[index].email
    document.getElementById("editaddress").value=converted[index].address
    document.getElementById("editphone").value=converted[index].phone
    document.getElementById("editobjectives").value=converted[index].objectives

    //object key value shows in input box 

    document.getElementById("father_name_").value =converted[index].personal_details.fathername
    document.getElementById("mother_name_").value =converted[index].personal_details.mothername
    document.getElementById("age").value =converted[index].personal_details.dob
   
    document.getElementById("gender").value=converted[index].personal_details.gender
    document.getElementById("place").value =converted[index].personal_details.address

    document.getElementById("declare").value=converted[index].declaration
    
  //to show skills value in input box  

    let skill_add="";

    for (let each of converted[index].skills){
         skill_add= skill_add + `<input type="text" value="${each}" class="skill_input"></input>`
        }
    document.getElementById("edit_skill").innerHTML=skill_add

  //add extra skill input box function

    // function addingSkill(){
    //     let data=localStorage.getItem("detail");
    //     let converted=JSON.parse(data);

    //     let skill_in=`<input type="text" class="skill_input"/>`

    //     document.getElementById("editskill").innerHTML=skill_add+skill_in
       
    // }
    //    localStorage.setItem("detail",JSON.stringify(converted))

    
    //to show language value in input box

    let language=""

    for (let each of converted[index].personal_details.languages_known){
        language =language + `<input type="text" value="${each}" class="language_input"></input>`
        
    }
    document.getElementById("edit_language").innerHTML=language

    //add extra language input box function

    // function addinglanguage(){
    //     let data=localStorage.getItem("detail")
    //     let converted=JSON.parse(data);

    //     let input=`<input type="text" class="language_input"/>`

    //     document.getElementById("editlanguage").innerHTML=language+input
    // }

    // localStorage.setItem("detail",JSON.stringify(converted))


    //to show hobbie value in input box

    let hobbie=""

    for (let each of converted[index].personal_details.hobbies){
        hobbie= hobbie + `<input type="text" value="${each}" class="hobby_input"></input>`
    }
    document.getElementById("edit_hobby").innerHTML=hobbie

    //add extrea hobbie input box function

    // function addinghobby(){

    //     let data=localStorage.getItem("detail")
    //     let converted=JSON.parse(data);
    //     let newdata=`<input type="text" class="hobby_input"/>`
    //     document.getElementById("edithobby").innerHTML=hobbie + newdata
    // }
    // localStorage.setItem("detail",JSON.stringify(converted))


//to show education value in education input box
    
let educate=""

for (let each in converted[index].education){
    educate=educate + `<tr> 
        <td> <input type="text" value=${converted[index].education[each].course_name} class="educat_input" onkeyup="storeData(this,${each},'course_name','education')"></input></td>
        <td> <input type="text" value=${converted[index].education[each].ins_name} class="educat_input" onkeyup="storeData(this,${each},'ins_name','education')"></input></td>
        <td> <input type="text" value=${converted[index].education[each].percentage} class="educat_input" onkeyup="storeData(this,${each},'percentage','education')"></input></td>
        <td> <input type="text" value=${converted[index].education[each].year} class="educat_input" onkeyup="storeData(this,${each},'year','education')"></input></td>
        </tr>`
        
    }
    document.getElementById("edit_educat").innerHTML=educate

//to show experience value in input box

let experienc=""

for (let each in converted[index].experience){
    experienc=experienc + `<tr>
        <td> <input type="text" value=${converted[index].experience[each].company_name} class="experience_input" onkeyup="storeData(this,${each},'company_name','experience')"></input></td>
        <td> <input type="text" value=${converted[index].experience[each].year_of_experience} class="experience_input" onkeyup="storeData(this,${each},'year_of_experience','experience')"></input></td>
       <tr>`

    }

    document.getElementById("edit_experience").innerHTML=experienc


//education,projects,experience,certificates onkeyup update function:  


function storeData(ele,ind,key,p_key){
    let params = new URLSearchParams(document.location.search);
    let index = params.get("index");

    let data=localStorage.getItem("detail")
    let converted=JSON.parse(data);

    // converted[index].education[ind][key]=ele.value;
    converted[index][p_key][ind][key]=ele.value
    localStorage.setItem("detail",JSON.stringify(converted))

   }


//to show projects value in input box

    let proj=""

    for (let each in converted[index].projects){
        proj = proj + `<tr>
            <td> <input type="text" value=${converted[index].projects[each].project_name} class="proj_input" onkeyup="storeData(this,${each},'project_name','projects')"></input></td>
            <td> <input type="text" value=${converted[index].projects[each].duration} class="proj_input" onkeyup="storeData(this,${each},'duration','projects')"></input></td>
            <td> <input type="text" value=${converted[index].projects[each].team_size} class="proj_input" onkeyup="storeData(this,${each},'team_size','projects')"></input></td>
            <td> <input type="text" value=${converted[index].projects[each].organization} class="proj_input" onkeyup="storeData(this,${each},'organization','projects')"></input></td>
            </tr>`
    }
    document.getElementById("edit_project").innerHTML=proj


//to show certificates value in input box

    let certificat=""

for (let each in converted[index].certificates){

    certificat=certificat + `<tr> 
       
        <td> <input type="text" value=${converted[index].certificates[each].course_name} class="certify_input" onkeyup="storeData(this,${each},'course_name','certificates')"></input></td>
        <td> <input type="text" value=${converted[index].certificates[each].year} class="certify_input" onkeyup="storeData(this,${each},'year','certificates')"></input></td>
        </tr>`
        
    }
    document.getElementById("edit_certify").innerHTML=certificat


    //to create new input row in education

function createNewEducation(){
    
    let data=localStorage.getItem("detail")
    let converted=JSON.parse(data);
 
    let tbody=document.getElementById("edit_educat").innerHTML
    let educate_length=converted[index].education.length
    
    
    let new_education=`<tr><td> <input type="text" onkeyup="storeData(this,${educate_length},'course_name','education')"/></td>
                 <td> <input type="text" onkeyup="storeData(this,${educate_length},'ins_name','education')"/></td>
                 <td> <input type="text" onkeyup="storeData(this,${educate_length},'percentage','education')"/></td>
                 <td> <input type="text" onkeyup="storeData(this,${educate_length},'year','education')"/></td>
            </tr>`
   
     document.getElementById("edit_educat").innerHTML=tbody + new_education
   
  


     converted[index].education[educate_length]=
                                                  {
                                                  course_name:"",
                                                  ins_name:"",
                                                  percentage:"",
                                                  year:""
                                              }

     localStorage.setItem("detail",JSON.stringify(converted))
    }


 // to create new input row in experience

    function createNewExperience() {

        let data=localStorage.getItem("detail")
        let converted=JSON.parse(data);

        let exit_experience=document.getElementById("edit_experience").innerHTML
        let experience_length=converted[index].experience.length

        let new_experience=`<tr>
        <td> <input type="text" onkeyup="storeData(this,${experience_length},'company_name','experience')"></input></td>
        <td> <input type="text" onkeyup="storeData(this,${experience_length},'year_of_experience','experience')"></input></td>
       <tr>`

        document.getElementById("edit_experience").innerHTML=exit_experience + new_experience

        converted[index].experience[experience_length]={
                                                company_name:"",
                                                year_of_experience:""
                                                }


        localStorage.setItem("detail",JSON.stringify(converted))
    }

    //to create new input row in certificates

    function createNewCertificates(){
     
        let data=localStorage.getItem("detail")
        let converted=JSON.parse(data);

        let exit_certificate=document.getElementById("edit_certify").innerHTML
        let certificate_length=converted[index].certificates.length

        let new_certificate=`<tr>
            <td> <input type="text" onkeyup="storeData(this,${certificate_length},'course_name','certificates')"></input></td>
            <td> <input type="text" onkeyup="storeData(this,${certificate_length},'year','certificates')"></input></td>
            <tr>`

        document.getElementById("edit_certify").innerHTML=exit_certificate + new_certificate

        converted[index].certificates[certificate_length]={
                                                         course_name:"",
                                                         year:""
                                                          }

        localStorage.setItem("detail",JSON.stringify(converted))
    }
   
    //to create new input row using add project button 
                           
   function createNewProject(){

        let data=localStorage.getItem("detail")
        let converted=JSON.parse(data);

        let exit_project=document.getElementById("edit_project").innerHTML
        let project_length=converted[index].projects.length

        let new_project=`<tr>
            <td> <input type="text" onkeyup="storeData(this,${project_length},'project_name','projects')"></input></td>
            <td> <input type="text" onkeyup="storeData(this,${project_length},'duration','projects')"></input></td>
            <td> <input type="text" onkeyup="storeData(this,${project_length},'team_size','projects')"></input></td>
            <td> <input type="text" onkeyup="storeData(this,${project_length},'organization','projects')"></input></td>
            </tr>`

            document.getElementById("edit_project").innerHTML=exit_project + new_project

            converted[index].projects[project_length]={
                                                  project_name:"",
                                                  duration:"",
                                                  team_size:"",
                                                  organization:""
                                                  }

                localStorage.setItem("detail",JSON.stringify(converted))
            }
   


    function side_add(id){
    
    let parms = new URLSearchParams(document.location.search);
    let index = parms.get("index");

    let desk = localStorage.getItem("details");
    let converted = JSON.parse(desk);

    if(id=="edit_skill"){
        // Create a new input element skills
    let create_add = document.createElement("input");
    create_add.setAttribute('type', 'text');
    create_add.setAttribute('class', 'skill_input'); // Add a class for easier selection
    create_add.setAttribute('placeholder', 'enter the skills'); 
     // Append the input element to the specified container
    document.getElementById("edit_skill").appendChild(create_add);
     // Update the skills array in the local storage with the current input value
    converted[index].skills.push(create_add.value);
    }
    else if(id=="edit_hobby"){
        // Create a new input element hobbies
    let create_add = document.createElement("input");
    create_add.setAttribute('type', 'text');
    create_add.setAttribute('class', 'hobby_input'); // Add a class for easier selection 

    // Append the input element to the specified container
    document.getElementById("edit_hobby").appendChild(create_add);

    // Update the hobbies array in the local storage with the current input value
    converted[index].hobbies.push(create_add.value);
    }

    else if(id=="edit_language"){
    // Create a new input element languages
    let create_add = document.createElement("input");
    create_add.setAttribute('type', 'text');
    create_add.setAttribute('class', 'language_input'); // Add a class for easier selection 

    // Append the input element to the specified container
    document.getElementById("edit_language").appendChild(create_add);

    // Update the languages array in the local storage with the current input value
    converted[index].languages_known.push(create_add.value);
    }
    }


//     else if(id=="edit_educat"){
//         let data=localStorage.getItem("detail")
//         let converted=JSON.parse(data);
    
//         let education_length=converted[index].education.length;
//         let t_body_id=document.getElementById("edit_educat").innerHTML;
//         let add_education=`<tr>
//         <td><input type="text" onkeyup="setData(this,${education_length},'course_name','education')"></td>
//         <td><input type="text" onkeyup="setData(this,${education_length},'ins_name','education')"></td>
//         <td><input type="text" onkeyup="setData(this,${education_length},'percentage','education')"></td>
//         <td><input type="text" onkeyup="setData(this,${education_length},'year','education')"></td>
//     </tr>`
//     document.getElementById("edit_educat").innerHTML=t_body_id+add_education

//     converted[index].education[education_length]={
//                                                     course_name:"",
//                                                     ins_name:"",
//                                                     percentage:"",
//                                                     year:""
//     }
// }
    
    
//     else if(id=="edit_project"){
//         let data=localStorage.getItem("detail")
//         let converted=JSON.parse(data);
//         let projects_length=converted[index].projects.length
//         let t_body_id=document.getElementById("edit_project").innerHTML
//         let add_projects=`<tr>
//         <td><input type="text" onkeyup="setData(this,${projects_length},'project_name','projects')" ></td>
//         <td><input type="text" onkeyup="setData(this,${projects_length},'duration','projects')" ></td>
//         <td><input type="text" onkeyup="setData(this,${projects_length},'team_size','projects')" ></td>
//         <td><input type="text" onkeyup="setData(this,${projects_length},'organization','projects')" ></td>
//     </tr>`

//     document.getElementById("edit_project").innerHTML=t_body_id+add_projects

//     converted[index].projects[projects_length]={
//         project_name:"",
//         duration:"",
//         team_size:"",
//         organization:""
//     }
// }


//     else if(id=="edit_experience"){
//         let data=localStorage.getItem("detail")
//         let converted=JSON.parse(data);
//         let experience_length=converted[index].experience.length
//         let t_body_id=document.getElementById("edit_experience").innerHTML
//         let add_experience=`<tr>
//         <td><input type="text" onkeyup="setData(this,${experience_length},'company_name','experience')"></td>
//         <td><input type="text" onkeyup="setData(this,${experience_length},'year_of_experience','experience')"></td>
//        </tr>`

//     document.getElementById("edit_experience").innerHTML=t_body_id+add_experience

//     converted[index].experience[experience_length]={
//         company_name:"",
//         year_of_experience:"",
       
//     }
// }
    
    
//     else if(id=="edit_certify"){
//         let parms = new URLSearchParams(document.location.search);
//         let index = parms.get("index");
//         let data=localStorage.getItem("detail")
//         let converted=JSON.parse(data);

//          let certificate_length=converted[index].certificates.length
//          let t_body_id=document.getElementById("edit_certify").innerHTML
//          let add_certificate= `<tr> 
   
//     <td> <input type="text" onkeyup="setData(this,${certificate_length},'course_name','certificates')"></input></td>
//     <td> <input type="text" onkeyup="setData(this,${certificate_length},'year','certificates')"></input></td>
//     </tr>`
    

//     document.getElementById("edit_certify").innerHTML=t_body_id + add_certificate
//     converted[index].certificates[certificate_length]={
//     course_name:"",
//     year:""

//     }
// }

    // localStorage.setItem("details", JSON.stringify(converted));








  </script>
</html>