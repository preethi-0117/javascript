<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
</head>
<body>
    <h1>Login</h1>
    <label>Email</label>
    <input type="email" id="mail"/>
    <label>Password</label>
    <input type="password" id="pass"/>
    <button type="button" id="loginThis">LOGIN</button>
</body>


<script type="module">

    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
    import { getFirestore, getDocs, collection, doc, addDoc, setDoc,  } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC47oEKcVbL5T7R_F783tevqcFTH8R1EHo",
      authDomain: "resumes-c23f8.firebaseapp.com",
      projectId: "resumes-c23f8",
      storageBucket: "resumes-c23f8.appspot.com",
      messagingSenderId: "156434018847",
      appId: "1:156434018847:web:acd23159dd1b48da375b2a"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

      // Initialize Cloud Firestore and get a reference to the service
       const db = getFirestore(app);


       let params=new URLSearchParams(document.location.search)
       let id=params.get("id")


loginThis.addEventListener('click',(e)=>{
    getDocs(collection(db, "register")).then(logpage => {
        logpage.forEach((each)=>{
            let email=document.getElementById("mail").value;
            let password=document.getElementById("pass").value;
            let datas=each.data();

            if(id==each.id){
                let email=document.getElementById("mail").value;
                let password=document.getElementById("pass").value;
                let datas=each.data();

                if (email==datas.email && password==datas.password){
                    let userdata={
                        mail:datas.email,
                        id:each.id,
                        name:datas.name
                    }
                    localStorage.setItem("userdatas",JSON.stringify(userdata))
                    location=`resumes.html?id=${each.id}`
                }
            }
            else if(email==datas.email && password==datas.password){

                let userdata={
                    email:datas.email,
                    id:each.id,
                    name:datas.name
                }
                localStorage.setItem("userdatas",JSON.stringify(userdata))
                    location=`resumes.html?id=${each.id}`
            }
        })
    })

})
   
        // docSnap.forEach((doc) =>  {
        //     users.push({ ...doc.data(), id:doc.id })
        // });
        // console.log("Document data: ",users)
        // })



    // loginThis.addEventListener('click', (e) =>  {
  
    //     let e_mail=document.getElementById("mail").value
    //     let pass_word=document.getElementById("pass").value

    // const q =query(collection(db, "Register Page"), where(pass_word, "==", "password" && e_mail,"==","email"));

    // getDocs(q).then(docSnap =>  {
    //     let users= [];
    //     docSnap.forEach((doc) =>  {
    //         users.push({ ...doc.data(), id:doc.id })
    //     });
    //     alert(1)
    //     console.log("Document data: ",users[0])
    //     })

    // })

    
       </script>
</html>